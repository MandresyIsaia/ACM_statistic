using api.Data;
using api.Model.exploitants;
using api.Model.mois;
using Microsoft.EntityFrameworkCore;

namespace api.Repository.exploitant
{
    public class ExploitantRepository
    {
        private readonly AppDbContext _context;
        public ExploitantRepository(AppDbContext context)
        {
            _context = context;
        }
        public async Task<List<Exploitant>> getAll()
        {

            var excludedIds = new List<String> { "0001", "0002", "0003", "0004", "0005" };
            var paramList = string.Join(",", excludedIds.Select(id => $"'{id}'"));

            var sql = $"SELECT * FROM RED_EXPLOITANT WHERE Code NOT IN ({paramList})";

            return await _context.Exploitants.FromSqlRaw(sql).ToListAsync();
        }

    }
}
